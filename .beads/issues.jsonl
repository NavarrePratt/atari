{"id":"atari-2zi","title":"Test new atari prefix","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T21:09:38.377671Z","created_by":"npratt","updated_at":"2026-01-20T21:09:44.830261Z","closed_at":"2026-01-20T21:09:44.830218Z","close_reason":"Test bead - verified br working with atari prefix","compaction_level":0,"original_size":0}
{"id":"bd-15x","title":"Add integration tests for top-level selection","description":"# Description\nAdd integration tests that verify the top-level selection mode works correctly in realistic multi-epic scenarios.\n\n# Technical Approach\n1. Test scenarios:\n   - Multiple epics with different priorities\n   - Mix of epics and standalone beads\n   - Epic exhaustion and switch to next\n   - Eager switch behavior when enabled\n   - Resume after restart with persisted active top-level\n   - --epic flag overriding selection mode\n\n2. Test structure:\n   - Use existing integration test patterns in internal/integration/\n   - Mock br commands for consistent bead graphs\n   - Verify correct selection order\n\n# Key Files\n- internal/integration/selection_test.go (new)\n- internal/integration/ - existing integration test patterns\n\n# Acceptance Criteria\n- [ ] Tests cover multi-epic priority ordering\n- [ ] Tests cover standalone bead handling\n- [ ] Tests cover exhaustion and switching\n- [ ] Tests cover eager_switch behavior\n- [ ] Tests cover state persistence across restart\n- [ ] Tests verify --epic takes precedence\n\n# Verification\n- [ ] `mise run test` passes\n- [ ] New tests provide meaningful coverage\n\nIf implementation reveals new issues, create separate issues for investigation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-20T23:05:33.070462Z","created_by":"npratt","updated_at":"2026-01-20T23:06:11.723035Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-15x","depends_on_id":"bd-199","type":"blocks","created_at":"2026-01-20T23:05:37.855227Z","created_by":"npratt"},{"issue_id":"bd-15x","depends_on_id":"bd-1a8","type":"parent-child","created_at":"2026-01-20T23:06:06.592329Z","created_by":"npratt"},{"issue_id":"bd-15x","depends_on_id":"bd-3iw","type":"blocks","created_at":"2026-01-20T23:05:37.887826Z","created_by":"npratt"}]}
{"id":"bd-199","title":"Extend events and TUI for top-level display","description":"# Description\nExtend IterationStartEvent with top-level context and update the TUI to show active top-level item in status line and highlight in graph.\n\n# Technical Approach\n1. Event extension (internal/events/types.go):\n   - Add TopLevelID and TopLevelTitle fields to IterationStartEvent\n   - Update event creation in controller\n\n2. TUI status line (internal/tui/):\n   - Add active top-level item to status line display\n   - Format: \"Epic: bd-xxx - Title\" or \"Standalone: bd-xxx - Title\"\n   - Show when selection_mode is \"top-level\"\n\n3. TUI graph highlighting (internal/tui/):\n   - Highlight the active top-level item's subtree in bead graph\n   - Use distinct color/style for active subtree vs other beads\n   - Clear highlight when top-level changes\n\n# Key Files\n- internal/events/types.go - event struct changes\n- internal/controller/controller.go - emit updated events\n- internal/tui/model.go - status line update\n- internal/tui/graph.go - highlight logic (if graph rendering exists)\n\n# Acceptance Criteria\n- [ ] IterationStartEvent includes TopLevelID/TopLevelTitle\n- [ ] TUI status line shows active top-level item\n- [ ] TUI graph highlights active subtree (if graph view exists)\n- [ ] Display updates when top-level changes\n\n# Verification\n- [ ] `mise run lint` passes\n- [ ] `mise run test` passes\n- [ ] Manual TUI verification shows correct display\n\nIf implementation reveals new issues, create separate issues for investigation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-20T23:05:03.371964Z","created_by":"npratt","updated_at":"2026-01-20T23:06:11.594528Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-199","depends_on_id":"bd-1a8","type":"parent-child","created_at":"2026-01-20T23:06:06.505183Z","created_by":"npratt"},{"issue_id":"bd-199","depends_on_id":"bd-btd","type":"blocks","created_at":"2026-01-20T23:05:07.467937Z","created_by":"npratt"}]}
{"id":"bd-1a8","title":"Top-level selection mode for atari","description":"# Description\nAdd a \"top-level\" selection mode to atari that prioritizes work at the root level of the ownership graph. Instead of picking beads globally by priority, atari selects the highest-priority top-level item (epic or standalone bead) and completes all its ready work before moving to the next.\n\n# Key Decisions\n| Decision | Choice |\n|----------|--------|\n| Default mode | top-level (not global) |\n| Top-level includes | Epics AND standalone beads |\n| Priority source | Item's own priority field |\n| On exhaustion | Clear active, re-select all |\n| On all complete | Auto-close epic, move on |\n| --epic interaction | --epic takes precedence |\n| Persistence | Yes, verify on resume |\n| Eager switch default | false (complete before switching) |\n\n# Children\n- bd-308: Config options\n- bd-3cc: Workqueue selection logic\n- bd-btd: State persistence and controller integration\n- bd-199: Events and TUI display\n- bd-3iw: Init skills for epic priority guidance\n- bd-15x: Integration tests\n- bd-1h9: Final verification","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-20T23:06:01.045389Z","created_by":"npratt","updated_at":"2026-01-20T23:06:01.045389Z","compaction_level":0,"original_size":0}
{"id":"bd-1h9","title":"Final verification: top-level selection mode","description":"# Description\nRun full test suite and verify all aspects of the top-level selection mode feature work correctly together.\n\n# Verification Steps\n1. Run full test suite: `mise run test`\n2. Run linter: `mise run lint`\n3. Build binary: `mise run build`\n4. Manual verification:\n   - Start atari with default config (top-level mode)\n   - Verify it selects highest priority epic/standalone\n   - Verify it completes that item before switching\n   - Test --selection-mode global for comparison\n   - Test --eager-switch behavior\n   - Test --epic flag takes precedence\n   - Verify TUI displays active top-level item\n   - Verify state persistence across restart\n\n# Acceptance Criteria\n- [ ] All tests pass\n- [ ] Linter passes\n- [ ] Build succeeds\n- [ ] Manual verification confirms expected behavior\n- [ ] Documentation is complete and accurate\n\n# Verification\n- [ ] `mise run lint` passes\n- [ ] `mise run test` passes\n- [ ] `mise run build` passes\n- [ ] Manual testing complete\n\nIf implementation reveals new issues, create separate issues for investigation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-20T23:05:46.305467Z","created_by":"npratt","updated_at":"2026-01-20T23:06:11.780060Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1h9","depends_on_id":"bd-15x","type":"blocks","created_at":"2026-01-20T23:05:51.068907Z","created_by":"npratt"},{"issue_id":"bd-1h9","depends_on_id":"bd-1a8","type":"parent-child","created_at":"2026-01-20T23:06:06.629395Z","created_by":"npratt"}]}
{"id":"bd-1j7","title":"Epic filter for atari start","description":"# Description\nAdd --epic flag to atari start that restricts work to beads under a specific epic.\n\n# Feature Summary\n- CLI flag: `atari start --epic bd-xxx`\n- Validates epic exists and is type=epic at startup\n- Filters workqueue to only epic descendants (recursive)\n- TUI shows \"(epic: bd-xxx)\" in status line\n- Graph dims beads outside epic subtree\n\n# Key Decisions (from user interview)\n- CLI flag only, no config file support\n- Start command only (not once)\n- Full bead ID required (bd-xxx format)\n- Fail fast if epic invalid\n- All descendants included (recursive)\n- Keep polling when epic work done\n- Normal retry/backoff rules apply\n- Restart required to change epic filter","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T21:41:53.283197Z","created_by":"npratt","updated_at":"2026-01-20T22:46:16.676785Z","closed_at":"2026-01-20T22:46:16.676721Z","close_reason":"Completed: Added --epic flag to atari start command with validation, workqueue filtering, TUI status display, and graph visualization. All child tasks closed.","compaction_level":0,"original_size":0}
{"id":"bd-2kc","title":"Test epic for verification","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T22:18:40.831653Z","created_by":"npratt","updated_at":"2026-01-20T22:20:08.905578Z","closed_at":"2026-01-20T22:20:08.905535Z","close_reason":"Test epic, created and removed during epic filter verification","compaction_level":0,"original_size":0}
{"id":"bd-2kn","title":"Dim non-epic beads in TUI graph view","description":"\u001b[3m\u001b[32m# Description\u001b[0m\nWhen epic filtering is active, dim beads \u001b[1m\u001b[1m\u001b[35min\u001b[0m the graph view that are outside the epic subtree\u001b[1m\u001b[30m.\u001b[0m This provides visual feedback about what\u001b[1m\u001b[30m's in scope for work.\u001b[0m\n\n\u001b[3m\u001b[32m# Technical Approach\u001b[0m\n\u001b[1m\u001b[30m1.\u001b[0m Pass epic descendant set to Graph (via RefreshWithFilter \u001b[1m\u001b[1m\u001b[35mor\u001b[0m similar)\n\u001b[1m\u001b[30m2.\u001b[0m Add OutOfScope field to \u001b[1m\u001b[1m\u001b[31mGraphNode\u001b[0m (\u001b[1m\u001b[1m\u001b[35mor\u001b[0m reuse existing OutOfView)\n\u001b[1m\u001b[30m3.\u001b[0m In graph rendering, apply dimmed style to nodes \u001b[1m\u001b[1m\u001b[35mnot\u001b[0m \u001b[1m\u001b[1m\u001b[35min\u001b[0m descendant set\n\u001b[1m\u001b[30m4.\u001b[0m Dimmed style: reduce color saturation \u001b[1m\u001b[1m\u001b[35mor\u001b[0m use gray text\n\u001b[1m\u001b[30m5.\u001b[0m Epic node itself should NOT be dimmed\n\n\u001b[3m\u001b[32m# Relevant Files\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m internal\u001b[1m\u001b[30m/\u001b[0mtui\u001b[1m\u001b[30m/\u001b[0mgraph\u001b[1m\u001b[30m.\u001b[0mgo \u001b[1m\u001b[30m-\u001b[0m Graph struct, Refresh()\n\u001b[1m\u001b[30m-\u001b[0m internal\u001b[1m\u001b[30m/\u001b[0mtui\u001b[1m\u001b[30m/\u001b[0mgraph_render\u001b[1m\u001b[30m.\u001b[0mgo \u001b[1m\u001b[30m-\u001b[0m renderNode(), style application\n\u001b[1m\u001b[30m-\u001b[0m internal\u001b[1m\u001b[30m/\u001b[0mtui\u001b[1m\u001b[30m/\u001b[0mstyles\u001b[1m\u001b[30m.\u001b[0mgo \u001b[1m\u001b[30m-\u001b[0m style definitions (add dimmed variant)\n\u001b[1m\u001b[30m-\u001b[0m internal\u001b[1m\u001b[30m/\u001b[0mtui\u001b[1m\u001b[30m/\u001b[0mgraph_types\u001b[1m\u001b[30m.\u001b[0mgo \u001b[1m\u001b[30m-\u001b[0m \u001b[1m\u001b[1m\u001b[31mGraphNode\u001b[0m struct\n\n\u001b[3m\u001b[32m# Example\u001b[0m\n```\nWhen \u001b[1m\u001b[30m--\u001b[0mepic bd\u001b[1m\u001b[30m-\u001b[0mabc is set:\n\u001b[1m\u001b[30m-\u001b[0m bd\u001b[1m\u001b[30m-\u001b[0mabc (epic): normal color\n\u001b[1m\u001b[30m-\u001b[0m bd\u001b[1m\u001b[30m-\u001b[0mxyz (child of bd\u001b[1m\u001b[30m-\u001b[0mabc): normal color\n\u001b[1m\u001b[30m-\u001b[0m bd\u001b[1m\u001b[30m-\u001b[0mother (\u001b[1m\u001b[1m\u001b[35mnot\u001b[0m \u001b[1m\u001b[1m\u001b[35min\u001b[0m epic): dimmed\u001b[1m\u001b[30m/\u001b[0mgray\n```\n\n\u001b[3m\u001b[32m# Acceptance Criteria\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m [ ] Beads outside epic subtree rendered with dimmed style\n\u001b[1m\u001b[30m-\u001b[0m [ ] Epic itself \u001b[1m\u001b[1m\u001b[35mand\u001b[0m all descendants rendered normally\n\u001b[1m\u001b[30m-\u001b[0m [ ] Without epic filter, all beads rendered normally\n\u001b[1m\u001b[30m-\u001b[0m [ ] Dimmed style is clearly distinguishable but still readable\n\n\u001b[3m\u001b[32m# Verification\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m [ ] `mise run lint` passes\n\u001b[1m\u001b[30m-\u001b[0m [ ] `mise run test` passes\n\u001b[1m\u001b[30m-\u001b[0m [ ] Visual verification with TUI graph mode\n\nIf implementation reveals new issues, create separate issues \u001b[1m\u001b[1m\u001b[35mfor\u001b[0m investigation\u001b[1m\u001b[30m.\u001b[0m","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T21:41:24.602932Z","created_by":"npratt","updated_at":"2026-01-20T22:17:45.946500Z","closed_at":"2026-01-20T22:17:45.946452Z","close_reason":"Implemented epic filter dimming: added OutOfScope field to GraphNode, SetEpicFilter/GetEpicFilter methods, computeEpicDescendants algorithm. Nodes outside epic subtree render with dimmed style. Tests pass.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2kn","depends_on_id":"bd-1j7","type":"parent-child","created_at":"2026-01-20T21:41:53.396998Z","created_by":"npratt"},{"issue_id":"bd-2kn","depends_on_id":"bd-35g","type":"blocks","created_at":"2026-01-20T21:41:42.680819Z","created_by":"npratt"}]}
{"id":"bd-2mp","title":"Add --epic flag to atari start command","description":"\u001b[3m\u001b[32m# Description\u001b[0m\n\u001b[1m\u001b[1m\u001b[35mAdd\u001b[0m\u001b[37m \u001b[0ma\u001b[37m \u001b[0m\u001b[1m\u001b[30m`--\u001b[0mepic\u001b[37m \u001b[0mbd\u001b[1m\u001b[30m-\u001b[0mxxx\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mflag\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0mthe\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0matari\u001b[37m \u001b[0mstart\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mcommand\u001b[37m \u001b[0mthat\u001b[37m \u001b[0mrestricts\u001b[37m \u001b[0mwork\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0mbeads\u001b[37m \u001b[0munder\u001b[37m \u001b[0ma\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mspecific\u001b[0m\u001b[37m \u001b[0mepic.\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Technical Approach\u001b[0m\n\u001b[1m\u001b[30m1\u001b[0m.\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mAdd\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[30m`--\u001b[0mepic\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mstring\u001b[37m \u001b[0mflag\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0mstart\u001b[37m \u001b[0mcommand\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35min\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mcmd\u001b[1m\u001b[30m/\u001b[0matari\u001b[1m\u001b[30m/\u001b[0mmain.go\u001b[1m\u001b[30m`\u001b[0m\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m2\u001b[0m.\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mAdd\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mEpic\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mfield\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mControllerConfig\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mstruct\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35min\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0minternal\u001b[1m\u001b[30m/\u001b[0mconfig\u001b[1m\u001b[30m/\u001b[0mconfig.go\u001b[1m\u001b[30m`\u001b[0m\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m3\u001b[0m.\u001b[37m \u001b[0mWire\u001b[37m \u001b[0mflag\u001b[37m \u001b[0mvalue\u001b[37m \u001b[0mthrough\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0mcontroller\u001b[37m \u001b[0mconfig\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m4\u001b[0m.\u001b[37m \u001b[0mFlag\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mis\u001b[0m\u001b[37m \u001b[0moptional\u001b[37m \u001b[0m\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mwhen\u001b[0m\u001b[37m \u001b[0mempty,\u001b[37m \u001b[0mno\u001b[37m \u001b[0m\u001b[32mfiltering\u001b[0m\u001b[37m \u001b[0m(current\u001b[37m \u001b[0mbehavior)\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Relevant Files\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0mcmd\u001b[1m\u001b[30m/\u001b[0matari\u001b[1m\u001b[30m/\u001b[0mmain.go\u001b[37m \u001b[0m\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0mstart\u001b[37m \u001b[0mcommand\u001b[37m \u001b[0mdefinition\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0minternal\u001b[1m\u001b[30m/\u001b[0mconfig\u001b[1m\u001b[30m/\u001b[0mconfig.go\u001b[37m \u001b[0m\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0mControllerConfig\u001b[37m \u001b[0mstruct\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Acceptance Criteria\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0matari\u001b[37m \u001b[0mstart\u001b[37m \u001b[0m\u001b[1m\u001b[30m--\u001b[0mepic\u001b[37m \u001b[0mbd\u001b[1m\u001b[30m-\u001b[0mxxx\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0maccepts\u001b[37m \u001b[0mepic\u001b[37m \u001b[0mID\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0matari\u001b[37m \u001b[0mstart\u001b[37m \u001b[0m\u001b[1m\u001b[30m--\u001b[0mhelp\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mshows\u001b[37m \u001b[0mepic\u001b[37m \u001b[0mflag\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mwith\u001b[0m\u001b[37m \u001b[0mdescription\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0mEpic\u001b[37m \u001b[0mvalue\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mis\u001b[0m\u001b[37m \u001b[0maccessible\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35min\u001b[0m\u001b[37m \u001b[0mcontroller\u001b[37m \u001b[0mconfig\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0mNo\u001b[37m \u001b[0mepic\u001b[37m \u001b[0mflag\u001b[37m \u001b[0m\u001b[1m\u001b[30m=\u001b[0m\u001b[37m \u001b[0mcurrent\u001b[37m \u001b[0m\u001b[32mbehavior\u001b[0m\u001b[37m \u001b[0m(no\u001b[37m \u001b[0mfiltering)\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Verification\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mmise\u001b[37m \u001b[0mrun\u001b[37m \u001b[0mlint\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mpasses\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mmise\u001b[37m \u001b[0mrun\u001b[37m \u001b[0mtest\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mpasses\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[1m\u001b[1m\u001b[35mIf\u001b[0m\u001b[37m \u001b[0mimplementation\u001b[37m \u001b[0mreveals\u001b[37m \u001b[0mnew\u001b[37m \u001b[0missues,\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mcreate\u001b[0m\u001b[37m \u001b[0mseparate\u001b[37m \u001b[0missues\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mfor\u001b[0m\u001b[37m \u001b[0minvestigation.\u001b[37m\u001b[0m","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T21:40:43.473224Z","created_by":"npratt","updated_at":"2026-01-20T21:50:38.429948Z","closed_at":"2026-01-20T21:50:38.429902Z","close_reason":"Added --epic flag to atari start command: FlagEpic constant in config.go, Epic field in WorkQueueConfig, flag wired through to controller config. Lint and tests pass.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2mp","depends_on_id":"bd-1j7","type":"parent-child","created_at":"2026-01-20T21:41:53.311147Z","created_by":"npratt"}]}
{"id":"bd-2sg","title":"Epic filter end-to-end verification","description":"# Description\nFinal verification that the epic filter feature works end-to-end. Run full test suite and perform manual integration test.\n\n# Verification Steps\n1. Run `mise run lint` - must pass\n2. Run `mise run test` - must pass\n3. Manual test sequence:\n   - Create test epic: `br create \"Test epic\" --type epic`\n   - Create child bead: `br create \"Child task\" --description \"...\"`\n   - Link child to epic: `br dep add <child-id> <epic-id> --type parent-child`\n   - Start atari with filter: `atari start --epic <epic-id> --tui`\n   - Verify TUI shows \"(epic: <epic-id>)\" in status\n   - Verify only child bead is picked up for work\n   - Verify graph shows non-epic beads dimmed\n\n# Acceptance Criteria\n- [ ] All unit tests pass\n- [ ] Linting passes\n- [ ] Manual integration test confirms feature works\n- [ ] Error cases tested (invalid epic ID, non-epic type)\n\n# Notes\nThis is a verification-only bead. If issues are found, create new beads for fixes rather than implementing here.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T21:41:33.329625Z","created_by":"npratt","updated_at":"2026-01-20T22:20:14.870899Z","closed_at":"2026-01-20T22:20:14.870855Z","close_reason":"Verified epic filter feature end-to-end: lint passes, all 200+ unit tests pass, error cases work correctly (invalid epic ID returns 'epic not found', non-epic type returns 'is not an epic'), atari starts successfully with valid epic filter showing 'validated epic' in logs, TUI status suffix and graph dimming are implemented and unit-tested","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2sg","depends_on_id":"bd-1j7","type":"parent-child","created_at":"2026-01-20T21:41:53.419110Z","created_by":"npratt"},{"issue_id":"bd-2sg","depends_on_id":"bd-2kn","type":"blocks","created_at":"2026-01-20T21:41:42.812526Z","created_by":"npratt"},{"issue_id":"bd-2sg","depends_on_id":"bd-35g","type":"blocks","created_at":"2026-01-20T21:41:42.726375Z","created_by":"npratt"},{"issue_id":"bd-2sg","depends_on_id":"bd-wpi","type":"blocks","created_at":"2026-01-20T21:41:42.771826Z","created_by":"npratt"}]}
{"id":"bd-2uc","title":"Timing test","description":"Testing race window","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T23:08:53.746658Z","created_by":"npratt","updated_at":"2026-01-20T23:08:53.937060Z","closed_at":"2026-01-20T23:08:53.936996Z","close_reason":"Test cleanup","compaction_level":0,"original_size":0}
{"id":"bd-308","title":"Add selection_mode and eager_switch config options","description":"# Description\nAdd new config fields to support top-level selection mode. This is the foundation for the new selection behavior.\n\n# Technical Approach\n1. Add to WorkQueueConfig in internal/config/config.go:\n   - SelectionMode string (values: \"top-level\", \"global\"; default: \"top-level\")\n   - EagerSwitch bool (default: false)\n\n2. Add CLI flags in cmd/atari/config.go:\n   - --selection-mode flag\n   - --eager-switch flag\n\n3. Add flag binding in cmd/atari/main.go (following existing patterns like --epic)\n\n4. Update config documentation in docs/config/\n\n# Acceptance Criteria\n- [ ] SelectionMode field added with \"top-level\" as default\n- [ ] EagerSwitch field added with false as default\n- [ ] CLI flags work: `atari start --selection-mode global --eager-switch`\n- [ ] Config file works: selection_mode: global in yaml\n\n# Verification\n- [ ] `mise run lint` passes\n- [ ] `mise run test` passes\n- [ ] `mise run build` passes\n\nIf implementation reveals new issues, create separate issues for investigation.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-20T23:04:16.309713Z","created_by":"npratt","updated_at":"2026-01-20T23:08:38.944527Z","closed_at":"2026-01-20T23:08:38.944487Z","close_reason":"Added SelectionMode and EagerSwitch fields to WorkQueueConfig with defaults, CLI flags (--selection-mode, --eager-switch), viper bindings, and config documentation. All verification passes: lint, test, build.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-308","depends_on_id":"bd-1a8","type":"parent-child","created_at":"2026-01-20T23:06:06.365218Z","created_by":"npratt"}]}
{"id":"bd-313","title":"Test defer flag","description":"Testing defer flag","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-20T23:08:28.547915Z","created_by":"npratt","updated_at":"2026-01-20T23:08:28.547915Z","defer_until":"2099-01-01T14:00:00Z","compaction_level":0,"original_size":0}
{"id":"bd-35g","title":"Filter workqueue to epic descendants","description":"\u001b[3m\u001b[32m# Description\u001b[0m\nFilter\u001b[37m \u001b[0mworkqueue\u001b[37m \u001b[0mresults\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0monly\u001b[37m \u001b[0minclude\u001b[37m \u001b[0mbeads\u001b[37m \u001b[0mthat\u001b[37m \u001b[0mare\u001b[37m \u001b[0mdescendants\u001b[37m \u001b[0mof\u001b[37m \u001b[0mthe\u001b[37m \u001b[0mconfigured\u001b[37m \u001b[0m\u001b[32mepic\u001b[0m\u001b[37m \u001b[0m(direct\u001b[37m \u001b[0mchildren\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mand\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mall\u001b[0m\u001b[37m \u001b[0mrecursive\u001b[37m \u001b[0mdescendants).\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Technical Approach\u001b[0m\n\u001b[1m\u001b[30m1\u001b[0m.\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mAdd\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mEpicFilter\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mfield\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mWorkQueueConfig\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0m(epic\u001b[37m \u001b[0mID\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mwhen\u001b[0m\u001b[37m \u001b[0mfiltering)\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m2\u001b[0m.\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mAdd\u001b[0m\u001b[37m \u001b[0mmethod\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0mbuild\u001b[37m \u001b[0mdescendant\u001b[37m \u001b[0m\u001b[1m\u001b[32mset\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mby\u001b[0m\u001b[37m \u001b[0mwalking\u001b[37m \u001b[0mparent\u001b[37m \u001b[0mchains\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mfrom\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mall\u001b[0m\u001b[37m \u001b[0mbeads\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m3\u001b[0m.\u001b[37m \u001b[0mModify\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0m\u001b[32mfilterEligible\u001b[0m()\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0mexclude\u001b[37m \u001b[0mbeads\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mnot\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35min\u001b[0m\u001b[37m \u001b[0mdescendant\u001b[37m \u001b[0m\u001b[1m\u001b[32mset\u001b[0m\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m4\u001b[0m.\u001b[37m \u001b[0mDescendant\u001b[37m \u001b[0m\u001b[1m\u001b[32mset\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mis\u001b[0m\u001b[37m \u001b[0mrebuilt\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mon\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35meach\u001b[0m\u001b[37m \u001b[0m\u001b[32mpoll\u001b[0m\u001b[37m \u001b[0m(handles\u001b[37m \u001b[0mbeads\u001b[37m \u001b[0madded\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0mepic\u001b[37m \u001b[0mat\u001b[37m \u001b[0mruntime)\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m5\u001b[0m.\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mUse\u001b[0m\u001b[37m \u001b[0mexisting\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mbr\u001b[37m \u001b[0mlist\u001b[37m \u001b[0m\u001b[1m\u001b[30m--\u001b[0mjson\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0mget\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mall\u001b[0m\u001b[37m \u001b[0mbeads\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mwith\u001b[0m\u001b[37m \u001b[0mparent\u001b[37m \u001b[0m\u001b[32minfo\u001b[0m\u001b[37m \u001b[0m(GraphBead\u001b[37m \u001b[0mstruct\u001b[37m \u001b[0malready\u001b[37m \u001b[0mhas\u001b[37m \u001b[0mParent\u001b[37m \u001b[0mfield)\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Algorithm for descendant discovery\u001b[0m\n\u001b[1m\u001b[30m```\u001b[0m\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m1\u001b[0m.\u001b[37m \u001b[0mStart\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mwith\u001b[0m\u001b[37m \u001b[0mepic\u001b[37m \u001b[0mID\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35min\u001b[0m\u001b[37m \u001b[0mdescendant\u001b[37m \u001b[0m\u001b[1m\u001b[32mset\u001b[0m\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m2\u001b[0m.\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mFor\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35meach\u001b[0m\u001b[37m \u001b[0mbead,\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mif\u001b[0m\u001b[37m \u001b[0mits\u001b[37m \u001b[0mParent\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mis\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35min\u001b[0m\u001b[37m \u001b[0mdescendant\u001b[37m \u001b[0m\u001b[1m\u001b[32mset\u001b[0m,\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35madd\u001b[0m\u001b[37m \u001b[0mbead\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[32mset\u001b[0m\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m3\u001b[0m.\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mRepeat\u001b[0m\u001b[37m \u001b[0muntil\u001b[37m \u001b[0mno\u001b[37m \u001b[0mnew\u001b[37m \u001b[0mbeads\u001b[37m \u001b[0m\u001b[32madded\u001b[0m\u001b[37m \u001b[0m(handles\u001b[37m \u001b[0marbitrary\u001b[37m \u001b[0mnesting\u001b[37m \u001b[0mdepth)\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m```\u001b[0m\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Relevant Files\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0minternal\u001b[1m\u001b[30m/\u001b[0mworkqueue\u001b[1m\u001b[30m/\u001b[0mqueue.go\u001b[37m \u001b[0m\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0mManager,\u001b[37m \u001b[0mBead\u001b[37m \u001b[0mstruct,\u001b[37m \u001b[0m\u001b[32mfilterEligible\u001b[0m()\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0minternal\u001b[1m\u001b[30m/\u001b[0mconfig\u001b[1m\u001b[30m/\u001b[0mconfig.go\u001b[37m \u001b[0m\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0mWorkQueueConfig\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0minternal\u001b[1m\u001b[30m/\u001b[0mtui\u001b[1m\u001b[30m/\u001b[0mgraph_types.go\u001b[37m \u001b[0m\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0mGraphBead\u001b[37m \u001b[0mhas\u001b[37m \u001b[0mParent\u001b[37m \u001b[0m\u001b[32mfield\u001b[0m\u001b[37m \u001b[0m(reference)\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Acceptance Criteria\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mWith\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[30m--\u001b[0mepic\u001b[37m \u001b[0m\u001b[1m\u001b[32mset\u001b[0m,\u001b[37m \u001b[0monly\u001b[37m \u001b[0mbeads\u001b[37m \u001b[0munder\u001b[37m \u001b[0mthat\u001b[37m \u001b[0mepic\u001b[37m \u001b[0mare\u001b[37m \u001b[0mselected\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mfor\u001b[0m\u001b[37m \u001b[0mwork\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0mDirect\u001b[37m \u001b[0mchildren\u001b[37m \u001b[0mincluded\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0m\u001b[32mGrandchildren\u001b[0m\u001b[37m \u001b[0m(recursive)\u001b[37m \u001b[0mincluded\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0mBeads\u001b[37m \u001b[0madded\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0mepic\u001b[37m \u001b[0mduring\u001b[37m \u001b[0mruntime\u001b[37m \u001b[0mare\u001b[37m \u001b[0mpicked\u001b[37m \u001b[0mup\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mon\u001b[0m\u001b[37m \u001b[0mnext\u001b[37m \u001b[0mpoll\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0mWithout\u001b[37m \u001b[0m\u001b[1m\u001b[30m--\u001b[0mepic,\u001b[37m \u001b[0mcurrent\u001b[37m \u001b[0mbehavior\u001b[37m \u001b[0munchanged\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Verification\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mmise\u001b[37m \u001b[0mrun\u001b[37m \u001b[0mlint\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mpasses\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mmise\u001b[37m \u001b[0mrun\u001b[37m \u001b[0mtest\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mpasses\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0mUnit\u001b[37m \u001b[0mtest\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mfor\u001b[0m\u001b[37m \u001b[0mdescendant\u001b[37m \u001b[0m\u001b[1m\u001b[32mset\u001b[0m\u001b[37m \u001b[0mbuilding\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[1m\u001b[1m\u001b[35mIf\u001b[0m\u001b[37m \u001b[0mimplementation\u001b[37m \u001b[0mreveals\u001b[37m \u001b[0mnew\u001b[37m \u001b[0missues,\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mcreate\u001b[0m\u001b[37m \u001b[0mseparate\u001b[37m \u001b[0missues\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mfor\u001b[0m\u001b[37m \u001b[0minvestigation.\u001b[37m\u001b[0m","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T21:41:03.541292Z","created_by":"npratt","updated_at":"2026-01-20T22:03:52.654423Z","closed_at":"2026-01-20T22:03:52.654371Z","close_reason":"Implemented epic filtering in workqueue: added Parent field to Bead, fetchDescendants method with iterative algorithm, modified filterEligible to filter by descendants. Verified with comprehensive unit tests for single-level, multi-level, and edge cases. All tests pass, lint clean.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-35g","depends_on_id":"bd-1j7","type":"parent-child","created_at":"2026-01-20T21:41:53.353962Z","created_by":"npratt"},{"issue_id":"bd-35g","depends_on_id":"bd-enq","type":"blocks","created_at":"2026-01-20T21:41:42.589035Z","created_by":"npratt"}]}
{"id":"bd-36j","title":"Timing test","description":"Testing race window","status":"deferred","priority":2,"issue_type":"task","created_at":"2026-01-20T23:08:46.067340Z","created_by":"npratt","updated_at":"2026-01-20T23:08:46.105303Z","compaction_level":0,"original_size":0}
{"id":"bd-3cc","title":"Implement top-level selection logic in workqueue","description":"# Description\nAdd the core selection logic for top-level mode in the workqueue package. This identifies root items (epics + standalone beads) and filters to descendants of the selected top-level item.\n\n# Technical Approach\n1. Add method to identify top-level items:\n   - Query `br list --json` to get all beads\n   - Find roots: epics + beads with no parent\n   - Sort by priority (ascending), then creation time\n\n2. Add `NextTopLevel()` method to Manager:\n   - If activeTopLevel is set and has ready descendants, use it\n   - Otherwise, identify all top-level items, pick highest priority with ready work\n   - Filter beads to descendants of selected top-level item\n   - Apply existing filterEligible logic\n   - Return highest priority descendant\n\n3. Track active top-level in Manager struct (runtime state)\n\n4. Handle exhaustion: clear activeTopLevel when no ready descendants\n\n# Key Files\n- internal/workqueue/queue.go - main implementation\n- internal/workqueue/queue_test.go - unit tests\n\n# Acceptance Criteria\n- [ ] Top-level items correctly identified (epics + parentless beads)\n- [ ] NextTopLevel() selects from active top-level's descendants\n- [ ] Exhausted top-level items are cleared\n- [ ] Unit tests cover: multi-epic scenarios, standalone beads, exhaustion\n\n# Verification\n- [ ] `mise run lint` passes\n- [ ] `mise run test` passes\n\nIf implementation reveals new issues, create separate issues for investigation.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-20T23:04:31.704414Z","created_by":"npratt","updated_at":"2026-01-20T23:08:53.245277Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3cc","depends_on_id":"bd-1a8","type":"parent-child","created_at":"2026-01-20T23:06:06.423346Z","created_by":"npratt"},{"issue_id":"bd-3cc","depends_on_id":"bd-308","type":"blocks","created_at":"2026-01-20T23:04:36.526739Z","created_by":"npratt"}]}
{"id":"bd-3gs","title":"Test default status","description":"Checking default status","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T23:08:10.668358Z","created_by":"npratt","updated_at":"2026-01-20T23:08:10.719004Z","closed_at":"2026-01-20T23:08:10.718962Z","close_reason":"Test cleanup","compaction_level":0,"original_size":0}
{"id":"bd-3hk","title":"Child task for epic test","description":"Test child bead to verify epic filtering works correctly","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:18:46.069459Z","created_by":"npratt","updated_at":"2026-01-20T22:20:08.206568Z","closed_at":"2026-01-20T22:20:08.206524Z","close_reason":"Test bead, created and removed during epic filter verification","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3hk","depends_on_id":"bd-2kc","type":"parent-child","created_at":"2026-01-20T22:18:49.956769Z","created_by":"npratt"}]}
{"id":"bd-3iw","title":"Update atari init skills for epic priority guidance","description":"# Description\nInvestigate and update the atari init skills to provide guidance on setting epic priorities when using top-level selection mode.\n\n# Technical Approach\n1. Investigate current init skills:\n   - Review skills installed by `atari init`\n   - Check if epic creation guidance exists\n   - Identify where priority guidance should be added\n\n2. Update skills as needed:\n   - Add guidance for setting epic priorities\n   - Explain top-level selection mode behavior\n   - Recommend priority patterns (e.g., lower number = work first)\n\n3. Update documentation:\n   - Document the selection_mode config option\n   - Explain how top-level vs global modes work\n   - Add examples to config documentation\n\n# Key Files\n- cmd/atari/init.go or similar - init command implementation\n- Skills/templates installed by init\n- docs/config/configuration.md - config documentation\n\n# Acceptance Criteria\n- [ ] Init skills include epic priority guidance\n- [ ] Documentation explains selection modes\n- [ ] Users understand how priority affects work order in top-level mode\n\n# Verification\n- [ ] `atari init --dry-run` shows updated content\n- [ ] Documentation is clear and accurate\n\nIf implementation reveals new issues, create separate issues for investigation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-20T23:05:17.603383Z","created_by":"npratt","updated_at":"2026-01-20T23:06:11.677857Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3iw","depends_on_id":"bd-1a8","type":"parent-child","created_at":"2026-01-20T23:06:06.546336Z","created_by":"npratt"},{"issue_id":"bd-3iw","depends_on_id":"bd-btd","type":"blocks","created_at":"2026-01-20T23:05:23.625934Z","created_by":"npratt"}]}
{"id":"bd-3l7","title":"Test defer flag","description":"Testing defer flag","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T23:08:32.487067Z","created_by":"npratt","updated_at":"2026-01-20T23:08:32.582893Z","closed_at":"2026-01-20T23:08:32.582847Z","close_reason":"Test cleanup","defer_until":"2099-01-01T14:00:00Z","compaction_level":0,"original_size":0}
{"id":"bd-btd","title":"Persist active top-level and integrate with controller","description":"# Description\nAdd state persistence for the active top-level item and integrate the new selection mode into the controller's main loop.\n\n# Technical Approach\n1. State persistence (internal/events/statesink.go):\n   - Add ActiveTopLevel field to State struct (ID string)\n   - Add ActiveTopLevelTitle field for display\n   - Persist/restore in state.json\n\n2. Controller integration (internal/controller/controller.go):\n   - Check config.WorkQueue.SelectionMode at startup\n   - Use workqueue.NextTopLevel() when mode is \"top-level\"\n   - Use existing workqueue.Next() when mode is \"global\"\n   - Pass activeTopLevel state to workqueue on restore\n   - Implement eager_switch check after each bead completion\n\n3. Resume verification:\n   - On startup/restore, verify activeTopLevel has ready descendants\n   - Clear and re-select if not\n\n# Key Files\n- internal/events/statesink.go - state persistence\n- internal/events/types.go - State struct\n- internal/controller/controller.go - main loop integration\n- internal/workqueue/queue.go - state getter/setter for activeTopLevel\n\n# Acceptance Criteria\n- [ ] ActiveTopLevel persisted in state.json\n- [ ] Controller uses correct selection method based on mode\n- [ ] Resume verifies active item before continuing\n- [ ] eager_switch works when enabled\n- [ ] --epic flag takes precedence over selection mode\n\n# Verification\n- [ ] `mise run lint` passes\n- [ ] `mise run test` passes\n\nIf implementation reveals new issues, create separate issues for investigation.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-20T23:04:48.310165Z","created_by":"npratt","updated_at":"2026-01-20T23:06:11.544804Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-btd","depends_on_id":"bd-1a8","type":"parent-child","created_at":"2026-01-20T23:06:06.470775Z","created_by":"npratt"},{"issue_id":"bd-btd","depends_on_id":"bd-3cc","type":"blocks","created_at":"2026-01-20T23:04:52.359465Z","created_by":"npratt"}]}
{"id":"bd-enq","title":"Validate epic at controller startup","description":"# Description\nWhen an epic ID is configured, validate it exists and is type=epic before starting the work loop. Fail fast with clear error if invalid.\n\n# Technical Approach\n1. Add validation method to controller that calls `br show <epic-id> --json`\n2. Parse response and verify `issue_type == \"epic\"`\n3. If epic doesn't exist or isn't an epic type, return error with clear message\n4. Call validation in controller Start() before entering main loop\n5. Store validated epic info (ID, title) for TUI display\n\n# Relevant Files\n- internal/controller/controller.go - Start() method, validation logic\n- internal/workqueue/queue.go - reference for br command execution pattern\n\n# Acceptance Criteria\n- [ ] Invalid epic ID causes startup failure with \"epic not found: bd-xxx\"\n- [ ] Non-epic bead ID causes failure with \"bd-xxx is not an epic (type: task)\"\n- [ ] Valid epic allows normal startup\n- [ ] Epic title stored for later TUI display\n\n# Verification\n- [ ] `mise run lint` passes\n- [ ] `mise run test` passes\n- [ ] Manual test: `atari start --epic bd-nonexistent` fails cleanly\n\nIf implementation reveals new issues, create separate issues for investigation.","notes":"Atari: main session and follow-up both failed to close bead. Resetting to open for manual review or retry.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T21:40:52.498845Z","created_by":"npratt","updated_at":"2026-01-20T21:57:55.864520Z","closed_at":"2026-01-20T21:57:55.864441Z","close_reason":"Verified implementation already complete: validateEpic() in controller.go handles invalid epic ID, non-epic type, and stores validated epic info. Tests in controller_test.go cover all cases. Manual tests confirm clean failures with proper error messages.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-enq","depends_on_id":"bd-1j7","type":"parent-child","created_at":"2026-01-20T21:41:53.331205Z","created_by":"npratt"},{"issue_id":"bd-enq","depends_on_id":"bd-2mp","type":"blocks","created_at":"2026-01-20T21:41:42.542323Z","created_by":"npratt"}]}
{"id":"bd-jje","title":"Test blocker bead","description":"Testing blocking deps","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T23:07:59.956366Z","created_by":"npratt","updated_at":"2026-01-20T23:08:00.380259Z","closed_at":"2026-01-20T23:08:00.380217Z","close_reason":"Test cleanup","compaction_level":0,"original_size":0}
{"id":"bd-ooh","title":"Test blocked bead","description":"Should be blocked by bd-jje","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T23:08:00.046150Z","created_by":"npratt","updated_at":"2026-01-20T23:08:00.426236Z","closed_at":"2026-01-20T23:08:00.426195Z","close_reason":"Test cleanup","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-ooh","depends_on_id":"bd-jje","type":"blocks","created_at":"2026-01-20T23:08:00.162957Z","created_by":"npratt"}]}
{"id":"bd-wpi","title":"Display epic filter in TUI status","description":"\u001b[3m\u001b[32m# Description\u001b[0m\n\u001b[1m\u001b[1m\u001b[35mShow\u001b[0m\u001b[37m \u001b[0mthe\u001b[37m \u001b[0mactive\u001b[37m \u001b[0mepic\u001b[37m \u001b[0mfilter\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35min\u001b[0m\u001b[37m \u001b[0mthe\u001b[37m \u001b[0mTUI\u001b[37m \u001b[0mstatus\u001b[37m \u001b[0mdisplay\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mas\u001b[0m\u001b[37m \u001b[0ma\u001b[37m \u001b[0msuffix,\u001b[37m \u001b[0me.g.,\u001b[37m \u001b[0m\u001b[1m\u001b[30m\"idle (epic: bd-xxx)\"\u001b[0m.\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Technical Approach\u001b[0m\n\u001b[1m\u001b[30m1\u001b[0m.\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mAdd\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mEpicID\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mand\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mEpicTitle\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mfields\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0mTUI\u001b[37m \u001b[0m\u001b[32mmodel\u001b[0m\u001b[37m \u001b[0m(\u001b[1m\u001b[32mset\u001b[0m\u001b[37m \u001b[0mvia\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mOption\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mor\u001b[0m\u001b[37m \u001b[0mmessage)\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m2\u001b[0m.\u001b[37m \u001b[0mPass\u001b[37m \u001b[0mepic\u001b[37m \u001b[0minfo\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mfrom\u001b[0m\u001b[37m \u001b[0mcontroller\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0mTUI\u001b[37m \u001b[0mat\u001b[37m \u001b[0mstartup\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m3\u001b[0m.\u001b[37m \u001b[0mModify\u001b[37m \u001b[0mstatus\u001b[37m \u001b[0mrendering\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35min\u001b[0m\u001b[37m \u001b[0mview.go\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mto\u001b[0m\u001b[37m \u001b[0mappend\u001b[37m \u001b[0m\u001b[1m\u001b[30m\"(epic: bd-xxx)\"\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mwhen\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[32mset\u001b[0m\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m4\u001b[0m.\u001b[37m \u001b[0mKeep\u001b[37m \u001b[0msuffix\u001b[37m \u001b[0mconcise\u001b[37m \u001b[0m\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0mjust\u001b[37m \u001b[0mID,\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mnot\u001b[0m\u001b[37m \u001b[0mfull\u001b[37m \u001b[0m\u001b[32mtitle\u001b[0m\u001b[37m \u001b[0m(space\u001b[37m \u001b[0mconstrained)\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Relevant Files\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0minternal\u001b[1m\u001b[30m/\u001b[0mtui\u001b[1m\u001b[30m/\u001b[0mmodel.go\u001b[37m \u001b[0m\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0mmodel\u001b[37m \u001b[0mstruct,\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mOption\u001b[0m\u001b[37m \u001b[0mfunctions\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0minternal\u001b[1m\u001b[30m/\u001b[0mtui\u001b[1m\u001b[30m/\u001b[0mview.go\u001b[37m \u001b[0m\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m\u001b[32mrenderHeader\u001b[0m()\u001b[37m \u001b[0mstatus\u001b[37m \u001b[0mline\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0minternal\u001b[1m\u001b[30m/\u001b[0mtui\u001b[1m\u001b[30m/\u001b[0mtui.go\u001b[37m \u001b[0m\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m\u001b[32mNew\u001b[0m()\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mand\u001b[0m\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mOption\u001b[0m\u001b[37m \u001b[0mpattern\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Example Output\u001b[0m\n\u001b[1m\u001b[30m```\u001b[0m\u001b[37m\u001b[0m\nStatus:\u001b[37m \u001b[0m\u001b[32midle\u001b[0m\u001b[37m \u001b[0m(epic:\u001b[37m \u001b[0mbd\u001b[1m\u001b[30m-\u001b[0mabc)\u001b[37m\u001b[0m\nbead:\u001b[37m \u001b[0mbd\u001b[1m\u001b[30m-\u001b[0mxyz\u001b[37m \u001b[0m\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0mImplement\u001b[37m \u001b[0mfeature\u001b[37m \u001b[0m[\u001b[1m\u001b[30m5\u001b[0mm\u001b[37m \u001b[0m\u001b[1m\u001b[30m32\u001b[0ms]\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m```\u001b[0m\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Acceptance Criteria\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mWhen\u001b[0m\u001b[37m \u001b[0mepic\u001b[37m \u001b[0mfilter\u001b[37m \u001b[0mactive,\u001b[37m \u001b[0mstatus\u001b[37m \u001b[0mshows\u001b[37m \u001b[0m\u001b[1m\u001b[30m\"(epic: bd-xxx)\"\u001b[0m\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mWhen\u001b[0m\u001b[37m \u001b[0mno\u001b[37m \u001b[0mepic\u001b[37m \u001b[0mfilter,\u001b[37m \u001b[0mstatus\u001b[37m \u001b[0munchanged\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mfrom\u001b[0m\u001b[37m \u001b[0mcurrent\u001b[37m \u001b[0mbehavior\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0mSuffix\u001b[37m \u001b[0mtruncated\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mif\u001b[0m\u001b[37m \u001b[0mterminal\u001b[37m \u001b[0mtoo\u001b[37m \u001b[0m\u001b[32mnarrow\u001b[0m\u001b[37m \u001b[0m(status\u001b[37m \u001b[0mline\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mnot\u001b[0m\u001b[37m \u001b[0mwrapped)\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[3m\u001b[32m# Verification\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mmise\u001b[37m \u001b[0mrun\u001b[37m \u001b[0mlint\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mpasses\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0m\u001b[1m\u001b[30m`\u001b[0mmise\u001b[37m \u001b[0mrun\u001b[37m \u001b[0mtest\u001b[1m\u001b[30m`\u001b[0m\u001b[37m \u001b[0mpasses\u001b[37m\u001b[0m\n\u001b[1m\u001b[30m-\u001b[0m\u001b[37m \u001b[0m[\u001b[37m \u001b[0m]\u001b[37m \u001b[0mVisual\u001b[37m \u001b[0mverification\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mwith\u001b[0m\u001b[37m \u001b[0mTUI\u001b[37m \u001b[0mrunning\u001b[37m\u001b[0m\n\u001b[37m\u001b[0m\n\u001b[1m\u001b[1m\u001b[35mIf\u001b[0m\u001b[37m \u001b[0mimplementation\u001b[37m \u001b[0mreveals\u001b[37m \u001b[0mnew\u001b[37m \u001b[0missues,\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mcreate\u001b[0m\u001b[37m \u001b[0mseparate\u001b[37m \u001b[0missues\u001b[37m \u001b[0m\u001b[1m\u001b[1m\u001b[35mfor\u001b[0m\u001b[37m \u001b[0minvestigation.\u001b[37m\u001b[0m","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T21:41:14.199702Z","created_by":"npratt","updated_at":"2026-01-20T22:11:14.778753Z","closed_at":"2026-01-20T22:11:14.778710Z","close_reason":"Completed: Added epicID field to TUI model, WithEpicID option function, and modified renderStatus() to show epic suffix. When epic filter is active, status line shows 'IDLE (epic: bd-xxx)'. All tests pass, lint clean.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-wpi","depends_on_id":"bd-1j7","type":"parent-child","created_at":"2026-01-20T21:41:53.376013Z","created_by":"npratt"},{"issue_id":"bd-wpi","depends_on_id":"bd-2mp","type":"blocks","created_at":"2026-01-20T21:41:42.635026Z","created_by":"npratt"}]}
